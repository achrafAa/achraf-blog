---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import Card from '../components/Card.astro';
import projectsData from '../data/projects.json';
import { getCollection, type CollectionEntry } from 'astro:content';

// Filter featured projects
const featuredProjects = projectsData.projects.filter(project => project.featured);

// Get recent blog posts
const allPosts = await getCollection('blog');
const recentPosts = allPosts
  .filter((post: CollectionEntry<'blog'>) => !post.data.draft)
  .sort((a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<Layout title="Achraf AAMRI | Senior Software Engineer">
	<Hero
		title="Open to Freelance & Collaboration"
		subtitle="Achraf AAMRI"
		description="Senior Software Engineer passionate about low-level programming and performance optimization. I build PHP packages and extensions, explore PHP internals, and dive deep into systems programming with C, Rust, and Zig. When I'm not optimizing at the byte level, I architect scalable backend solutions âš¡"
		primaryCta={{
			text: "Hire Me",
			href: "/contact"
		}}
		secondaryCta={{
			text: "View Projects",
			href: "/projects"
		}}
	/>

	<!-- Quick Stats Section -->
	<section class="py-16 bg-white dark:bg-gray-900">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="text-center mb-12">
				<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
					ğŸ¯ Quick Stats
				</h2>
			</div>

			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
				<div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-colors">
					<div class="flex items-center mb-3">
						<span class="text-2xl mr-3">ğŸš€</span>
						<h3 class="font-semibold text-gray-900 dark:text-white">Laravel Core Contributor</h3>
					</div>
					<p class="text-gray-600 dark:text-gray-300 text-sm">Merged bugfix improving framework reliability</p>
				</div>

				<div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-colors">
					<div class="flex items-center mb-3">
						<span class="text-2xl mr-3">ğŸŒŸ</span>
						<h3 class="font-semibold text-gray-900 dark:text-white">Open Source Maintainer</h3>
					</div>
					<p class="text-gray-600 dark:text-gray-300 text-sm">7+ active projects with 20+ stars combined</p>
				</div>

				<div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-colors">
					<div class="flex items-center mb-3">
						<span class="text-2xl mr-3">ğŸ˜</span>
						<h3 class="font-semibold text-gray-900 dark:text-white">PHP Internals Explorer</h3>
					</div>
					<p class="text-gray-600 dark:text-gray-300 text-sm">Deep diving into Zend engine and preparing core contributions</p>
				</div>

				<div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-colors">
					<div class="flex items-center mb-3">
						<span class="text-2xl mr-3">ğŸ”§</span>
						<h3 class="font-semibold text-gray-900 dark:text-white">Low-Level Programming</h3>
					</div>
					<p class="text-gray-600 dark:text-gray-300 text-sm">Building PHP extensions with C, Rust, and Zig</p>
				</div>

				<div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-colors">
					<div class="flex items-center mb-3">
						<span class="text-2xl mr-3">ğŸ“¦</span>
						<h3 class="font-semibold text-gray-900 dark:text-white">Docker Expert</h3>
					</div>
					<p class="text-gray-600 dark:text-gray-300 text-sm">Created development environments used by PHP community</p>
				</div>

				<div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-colors">
					<div class="flex items-center mb-3">
						<span class="text-2xl mr-3">âš¡</span>
						<h3 class="font-semibold text-gray-900 dark:text-white">Performance Engineering</h3>
					</div>
					<p class="text-gray-600 dark:text-gray-300 text-sm">Reduced response times by 40% through optimization</p>
				</div>
			</div>
		</div>
	</section>

	<!-- What I Do Section -->
	<section class="py-20 bg-gray-50 dark:bg-gray-800/50">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="text-center mb-16">
				<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
					ğŸ’¼ What I Do
				</h2>
				<p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
					Senior Software Engineer specializing in Performance Optimization, PHP Extensions & Low-Level Programming
				</p>
			</div>

			      <div class="grid md:grid-cols-2 lg:grid-cols-2 gap-8">
        <Card title="âš¡ Performance Engineering">
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Optimizing at the language and system level for maximum efficiency, achieving up to 40% performance improvements.
          </p>
        </Card>

        <Card title="ğŸ˜ PHP Internals Research">
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Studying the Zend engine architecture and preparing for core contributions to the PHP language itself.
          </p>
        </Card>

        <Card title="ğŸ¦€ Systems Programming">
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Leveraging C, Rust, and Zig for performance-critical components and exploring modern systems languages.
          </p>
        </Card>

        <Card title="ğŸ—ï¸ Backend Architecture">
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Designing scalable systems with deep understanding of underlying performance, achieving 300% scalability improvements.
          </p>
        </Card>
      </div>
		</div>
	</section>

	<!-- Tech Stack Section -->
	<section class="py-20 bg-white dark:bg-gray-900">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="text-center mb-16">
				<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
					ğŸ› ï¸ Tech Arsenal
				</h2>
				<p class="text-lg text-gray-600 dark:text-gray-300">
					Technologies I work with daily
				</p>
			</div>

			<div class="flex flex-wrap justify-center gap-4">
				{['C', 'Rust', 'Zig', 'PHP', 'Golang', 'Laravel', 'Symfony', 'TypeScript', 'Docker', 'AWS', 'PostgreSQL', 'Redis', 'Linux'].map(tech => (
					<span class="px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-700 dark:hover:text-blue-400 transition-colors cursor-default">
						{tech}
					</span>
				))}
			</div>
		</div>
	</section>

	<!-- Featured Projects Section -->
	<section class="py-20 bg-gray-50 dark:bg-gray-800/50">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex items-center justify-between mb-12">
				<div>
					<h2 class="text-3xl font-bold text-gray-900 dark:text-white">
						ğŸŒŸ Featured Open Source Projects
					</h2>
					<p class="text-gray-600 dark:text-gray-300 mt-2">
						Impactful projects used by the community
					</p>
				</div>
				<a 
					href="/projects" 
					class="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"
				>
					View all projects
					<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</a>
			</div>

			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
				{featuredProjects.map((project) => (
					<Card title={project.title} href={project.github}>
						<p class="text-gray-600 dark:text-gray-300 mb-4">
							{project.description}
						</p>
						<div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4">
							<div class="flex flex-wrap gap-2">
								{project.tags.map((tag) => (
									<span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs">
										{tag}
									</span>
								))}
							</div>
							<span class={`px-2 py-1 rounded text-xs ${
								project.status === 'ready' ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400' :
								project.status === 'beta' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400' :
								'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'
							}`}>
								{project.status}
							</span>
						</div>
					</Card>
				))}
			</div>
		</div>
	</section>

	<!-- Recent Blog Posts Section -->
	<section class="py-20 bg-white dark:bg-gray-900">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex items-center justify-between mb-12">
				<div>
					<h2 class="text-3xl font-bold text-gray-900 dark:text-white">
						ğŸ“ Recent Blog Posts
					</h2>
					<p class="text-gray-600 dark:text-gray-300 mt-2">
						Latest insights and tutorials
					</p>
				</div>
				<a 
					href="/blog" 
					class="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"
				>
					View all posts
					<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</a>
			</div>

			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
				{recentPosts.map((post: CollectionEntry<'blog'>) => (
					<article class="bg-gray-50 dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 dark:border-gray-700 hover:border-blue-200 dark:hover:border-blue-700 overflow-hidden">
						{/* Blog Post Image or Placeholder */}
						<div class="aspect-video bg-gray-100 dark:bg-gray-700">
							{post.data.heroImage ? (
								<img 
									src={post.data.heroImage} 
									alt={post.data.title}
									class="w-full h-full object-cover"
								/>
							) : (
								<div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-800">
									<div class="text-center">
										<svg class="w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
										</svg>
										<div class="text-sm font-medium text-gray-500 dark:text-gray-400">Blog Post</div>
									</div>
								</div>
							)}
						</div>
						
						<div class="p-6">
							<div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-3">
								<time datetime={post.data.pubDate.toISOString()}>
									{post.data.pubDate.toLocaleDateString('en-US', {
										year: 'numeric',
										month: 'long',
										day: 'numeric'
									})}
								</time>
							</div>
							
							<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3 line-clamp-2">
								<a href={`/blog/${post.slug}`} class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
									{post.data.title}
								</a>
							</h3>
							
							<p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-3">
								{post.data.description}
							</p>
							
							{post.data.tags && post.data.tags.length > 0 && (
								<div class="flex flex-wrap gap-2 mb-4">
									{post.data.tags.slice(0, 3).map((tag: string) => (
										<span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs">
											{tag}
										</span>
									))}
								</div>
							)}
							
							<a 
								href={`/blog/${post.slug}`}
								class="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm"
							>
								Read more
								<svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
								</svg>
							</a>
						</div>
					</article>
				))}
			</div>
		</div>
	</section>

	<!-- Current Focus Section -->
	<section class="py-20 bg-white dark:bg-gray-900">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="text-center mb-16">
				<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
					ğŸ“ˆ Current Focus
				</h2>
				<p class="text-lg text-gray-600 dark:text-gray-300">
					What I'm exploring and building right now
				</p>
			</div>

			<div class="grid md:grid-cols-2 gap-8">
				<div class="space-y-6">
					<div class="flex items-start space-x-4">
						<span class="text-2xl">âš¡</span>
						<div>
							<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Low-Level Programming</h3>
							<p class="text-gray-600 dark:text-gray-300">Diving deep into systems programming with C, Zig, and Rust for maximum performance</p>
						</div>
					</div>
					
					<div class="flex items-start space-x-4">
						<span class="text-2xl">ğŸ”§</span>
						<div>
							<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">PHP Extensions & Packages</h3>
							<p class="text-gray-600 dark:text-gray-300">Building high-performance PHP extensions and reusable packages for the community</p>
						</div>
					</div>
				</div>

				<div class="space-y-6">
					<div class="flex items-start space-x-4">
						<span class="text-2xl">ğŸ˜</span>
						<div>
							<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">PHP Internals</h3>
							<p class="text-gray-600 dark:text-gray-300">Diving into PHP core and the Zend engine architecture</p>
						</div>
					</div>
					
					<div class="flex items-start space-x-4">
						<span class="text-2xl">ğŸ“š</span>
						<div>
							<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Technical Writing</h3>
							<p class="text-gray-600 dark:text-gray-300">Sharing knowledge through documentation, tutorials, and deep-dive articles</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Beyond the Code Section -->
	<section class="py-20 bg-gray-50 dark:bg-gray-800/50">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
			<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">
				ğŸï¸ Beyond the Code
			</h2>
			<div class="grid md:grid-cols-3 gap-8">
				<div class="p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
					<span class="text-4xl block mb-4">ğŸï¸</span>
					<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Motorcycle Adventures</h3>
					<p class="text-gray-600 dark:text-gray-300">Exploring roads less traveled (and debugging issues less documented)</p>
				</div>
				<div class="p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
					<span class="text-4xl block mb-4">ğŸ”</span>
					<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Tech Explorer</h3>
					<p class="text-gray-600 dark:text-gray-300">Always experimenting with the latest tools and frameworks</p>
				</div>
				<div class="p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
					<span class="text-4xl block mb-4">â˜•</span>
					<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Coffee Connoisseur</h3>
					<p class="text-gray-600 dark:text-gray-300">Firm believer that good code requires great coffee</p>
				</div>
			</div>
		</div>
	</section>

	<!-- CTA Section -->
	<section class="py-20 bg-white dark:bg-gray-900">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
			<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
				Let's Build Something Amazing Together
			</h2>
			<p class="text-xl text-gray-600 dark:text-gray-300 mb-8">
				Available for freelance projects, technical consulting, and collaboration on exciting ventures
			</p>
			<div class="flex flex-col sm:flex-row items-center justify-center gap-4">
				<a 
					href="/contact" 
					class="inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
				>
					<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
					</svg>
					Get In Touch
				</a>
				
				<a 
					href="/projects" 
					class="inline-flex items-center px-8 py-3 border border-gray-300 dark:border-gray-600 text-base font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 shadow-md hover:shadow-lg"
				>
					<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
					</svg>
					View Projects
				</a>
			</div>
		</div>
	</section>
</Layout>
